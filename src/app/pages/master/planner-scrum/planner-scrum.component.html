<div class="header bg-gradient-danger pb-8 pt-5 pt-md-8">
  <div class="container-fluid">
    <div class="header-body">

    </div>
  </div>
</div>
<div class="container-fluid mt-7">

<!-- Table -->
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <!-- Cabecera -->
        <div class="card-header border-0">
          <!-- <h3 class="mb-0">Lista de Proyectos</h3> -->
          <div class="row">
            <div class="col-2">
              <label for="ProjSel">Proyecto</label>
              <ng-select [items]="Projects" name="ProjSel" #ProjSel
              bindLabel="Title"
              [(ngModel)]="this.ProjectSelected">
              </ng-select>
            </div>
            <div class="col-1" style="margin-top: 2em">
              <button type="button" class="btn btn-info btn-sm"  >+</button>
            </div>
            <div class="col-2">
              <label for="IterSel">Iteraciones</label>
              <ng-select [items]="Iterations" name="IterSel" #IterSel
              bindLabel="Title"
              bindValue="IterationCode"
              [(ngModel)]="this.IterationSelected">
              </ng-select>
            </div>
            <div class="col-1" style="margin-top: 2em;">
              <button type="button" class="btn btn-info btn-sm" (click)="NewIteration()">+</button>
            </div>
          </div>


          <div class="row" style="margin-top:1em">

            <!-- LIST TASKS -->
            <div class="col-3">

              <div class="card shadow" style="margin-bottom: 15px;" >
                <!-- Cabecera -->
                <div class="card-header">

                  <h2 style="display:inline-block">Tareas</h2>
                  <button type="button" style="float:right" class="btn btn-info btn-sm" >+</button>
                </div>

                <!-- Listado -->
                <div class="row taskRow" *ngFor="let task of IterationSelected.Tasks" >
                  <div class="col-8" >{{task.Title}}</div>
                  <div class="col-4">
                    <button type="button" title="Más opciones" class="btn btn-primary btn-sm" >*</button>
                    <button type="button" title="Añadir a la semana->" (click)="AddTasktoWeek(task)" class="btn btn-info btn-sm" >&gt;</button>
                  </div>
                </div>
                <div class="row" style="margin-top:30px"><div class="col-12"></div></div>


              </div>
            </div>

            <!-- KANBAN  -->
            <div class="col-9">

              <div class="board">

                <div class="board-bar">
                  <div class="row">
                    <div class="col-2">
                      <button type="button" style="float: left;" class="btn btn-success"  (click)="ChangeWeek(-1)" [disabled]="this.WeekPosition==0">Anterior</button>
                    </div>
                    <div class="col-8">
                      <p class="board-name">{{ boardSelected.name }}</p>
                    </div>
                    <div class="col-2">
                      <button type="button" style="float: right;" class="btn btn-success" (click)="ChangeWeek(1)" [disabled]="this.WeekPosition==this.IterationBoards.length-1">Siguiente</button>
                    </div>
                  </div>

                </div>

                <div class="board-wrapper">

                  <div class="board-columns" cdkDropListGroup>
                    <div class="board-column" *ngFor="let column of boardSelected.columns">

                      <div class="column-title">
                        {{ column.name }}
                      </div>

                      <div class="tasks-container"
                      cdkDropList
                      [cdkDropListData]="column.tasks"
                      (cdkDropListDropped)="drop($event)">
                        <div class="task" *ngFor="let item of column.tasks" cdkDrag>

                          <a  (click)="LaunchModalTagTask()" class="a" >{{ item.Title }}</a> <br>
                          <p style="display:inline">Tipo: {{item.TaskType}} <br>PF: {{item.PlannedEffort}}</p>


                        </div>
                      </div>
                    </div>

                  </div>

                </div>

              </div>

            </div>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<app-iteration-edit #ModalEditIteration (OnSaveIterationEvent)="GetIterations()" ></app-iteration-edit>
